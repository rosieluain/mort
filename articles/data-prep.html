<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formatting your data • mort</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Formatting your data">
<meta property="og:description" content="mort">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mort</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data-prep.html">Formatting your data</a>
    </li>
    <li>
      <a href="../articles/digging.html">Digging into your data</a>
    </li>
    <li>
      <a href="../articles/drift.html">Dead and drifting</a>
    </li>
    <li>
      <a href="../articles/morts.html">Identifying potential mortalities</a>
    </li>
    <li>
      <a href="../articles/plots.html">Plotting your data</a>
    </li>
    <li>
      <a href="../articles/review.html">Review new data</a>
    </li>
    <li>
      <a href="../articles/season.html">Seasonality</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rosieluain/mort/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Formatting your data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rosieluain/mort/blob/HEAD/vignettes/data-prep.Rmd" class="external-link"><code>vignettes/data-prep.Rmd</code></a></small>
      <div class="hidden name"><code>data-prep.Rmd</code></div>

    </div>

    
    
<p>All mort functions rely on residence events. Residence events are
similar to detection data, but include a start time, an end time, and
duration. Before proceeding to explore your data and flag potential
mortalities in mort, detection data must be converted into residence
events. This can be done within mort using the <code><a href="../reference/residences.html">residences()</a></code>
function, functions from other packages for acoustic telemetry data, or
manually.</p>
<div class="section level2">
<h2 id="mort-format">mort format<a class="anchor" aria-label="anchor" href="#mort-format"></a>
</h2>
<p>Residence events are generated in morts by the
<code><a href="../reference/residences.html">residences()</a></code> function. A residence event either ends when
the animal is detected at a new station or when the animal has not been
detected longer than a user-defined cutoff.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/residences.html">residences</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">data</span>,ID<span class="op">=</span><span class="st">"ID"</span>,station<span class="op">=</span><span class="st">"Station.Name"</span>,datetime<span class="op">=</span><span class="st">"DateTimeUTC"</span>,cutoff<span class="op">=</span><span class="fl">1</span>,units<span class="op">=</span><span class="st">"days"</span><span class="op">)</span></span></code></pre></div>
<p>Note that <code>units</code> specifies the units of the cutoff (in
the example above, the cutoff is 1 day). These units will also be used
to calculate the residence duration.</p>
<p>Dates and times must be of class POSIXt, or must be in the format
“YYYY-mm-dd HH:MM:SS”. Note that mort assumes that dates are in UTC. If
your datetimes are in POSIXt, mort will convert them to UTC. If your
dates are in local time, it is recommended that you convert your
datetime column to class POSIXt and that you change the time zone to
UTC:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">DateTimeUTC</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">DateTimeLocal</span>,format<span class="op">=</span><span class="st">"%Y-%m-%d %H:%M:%S"</span>,</span>
<span>                             tz<span class="op">=</span><span class="st">"America/Edmonton"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">DateTimeUTC</span><span class="op">)</span><span class="op">$</span><span class="va">tzone</span><span class="op">&lt;-</span><span class="st">"UTC"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="other-formats">Other formats<a class="anchor" aria-label="anchor" href="#other-formats"></a>
</h2>
<p>mort functions support the output from other packages for acoustic
telemetry data. Note that the following information will be most useful
if referenced while exploring the other mort functions.</p>
<div class="section level3">
<h3 id="actel">actel<a class="anchor" aria-label="anchor" href="#actel"></a>
</h3>
<p>Residence events are called “movement events” in actel, and are
generated using the <code>explore()</code> function.</p>
<p>Actel provides residence duration in the format HH:MM:SS. mort
converts the duration to a numeric vector, with units of seconds.</p>
<p>Dates in actel are in local time and will be converted to UTC by
mort. Users will receive a warning when this happens, including a
reminder to verify that the time zone in the actel output is
correct.</p>
<pre><code><span><span class="co">#&gt; Warning: If actel date/times are in local time, they will be converted to UTC.</span></span>
<span><span class="co">#&gt; Verify that time zone in actel output is correct.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="glatos">glatos<a class="anchor" aria-label="anchor" href="#glatos"></a>
</h3>
<p>Residence events are called “detection events” in glatos, and are
generated using the <code>detection_events()</code> function.</p>
<p>glatos uses seconds for the units of residence duration and UTC as
the timezone for datetimes.</p>
</div>
<div class="section level3">
<h3 id="vtrack">VTrack<a class="anchor" aria-label="anchor" href="#vtrack"></a>
</h3>
<p>Residence events are called “residences” in VTrack, and are generated
using the <code>RunResidenceExtraction()</code> function.</p>
<p>As of VTrack version 2.10, it looks as though VTrack assigns the
local time of the user’s computer to datetimes. As detection data are
typically downloaded in UTC, mort assumes that the datetimes output by
VTrack are actually in UTC, rather than local time. Users will receive a
warning when using VTrack residence events:</p>
<pre><code><span><span class="co">#&gt; Warning: Assuming that VTrack date/times are in UTC. If they are in local</span></span>
<span><span class="co">#&gt;             time, please convert to UTC before running</span></span></code></pre>
<p>Also as of VTrack version 2.10, VTrack calculates the duration of
residence events from single detections differently, depending on
whether the end of the residence event was due to a station change or
the gap in detections exceeded the time threshold. mort recalculates the
duration of VTrack residence events, with units of seconds. Users will
receive a warning as a reminder that the duration in mort outputs may
not match the duration in VTrack:</p>
<pre><code><span><span class="co">#&gt; Warning: When the duration of an event is 0 s (a single detection) and</span></span>
<span><span class="co">#&gt;             the reason for ending the event (ENDREASON) is 'timeout', Vtrack</span></span>
<span><span class="co">#&gt;             gives DURATION as the time between the current event and the next, not</span></span>
<span><span class="co">#&gt;             the duration of the current event. DURATION was recalculated as</span></span>
<span><span class="co">#&gt;             the duration of the events themselves, to better align with other</span></span>
<span><span class="co">#&gt;             packages.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="other-packages">Other packages?<a class="anchor" aria-label="anchor" href="#other-packages"></a>
</h3>
<p>If we have missed any other packages that generate residence events,
please let us know and start a new issue. We will work to incorporate
other formats if feasible. To support other formats in mort, the
residence events must have, at minimum, four columns: animal ID,
station/location name, residence start time, and residence end time. The
column names can vary from those used in mort, but must be consistent
within the generating package. If the residence events include duration,
the units must either be specified or invariant.</p>
</div>
</div>
<div class="section level2">
<h2 id="manual-formatting">Manual formatting<a class="anchor" aria-label="anchor" href="#manual-formatting"></a>
</h2>
<p>All mort functions will accept manual formatting (using the argument
<code>type="manual"</code>). Manual formatting must be used if you have
your own method for generating residence events. Manual formatting must
also be used if you have used <code><a href="../reference/residences.html">residences()</a></code> or a function
from another supported package to generate residence events, and then
either modified the format (e.g., converted an actel list to a
dataframe) or renamed the columns.</p>
<p>There are five mandatory columns for manually formatted data:</p>
<ol>
<li>Animal ID - either character or numeric</li>
<li>Station/location - either character or numeric</li>
<li>Residence start - must be POSIXt or a character in the format
“YYYY-mm-dd HH:MM:SS”. mort assumes that all dates and times are UTC. If
your data are in a local time zone, residence start should be in class
POSIXt and the time zone should be specified.</li>
<li>Residence end - must be formatted as for residence start</li>
<li>Residence duration - the difference in time between residence end
and residence start. May be either numeric or difftime class. The units
of residence duration must also be known and specified for many mort
functions.</li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rosie Smith, Heidi Swanson.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
